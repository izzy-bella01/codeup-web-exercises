<!DOCTYPE html>
<html lang="en">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
<!--        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">-->

<!--        &lt;!&ndash; Bootstrap CSS &ndash;&gt;-->
<!--        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">-->
        <title>Weather Map Project</title>
    </head>
    <body>
    <h1>Weather Map Project</h1>
    <div class="container">

    </div>



<!--    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>-->
<!--    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF" crossorigin="anonymous"></script>-->
    <script src="js/jquery-2.2.4.js"></script>
    <script src="js/keys.js"></script>
    <script>
        $.get("https://api.openweathermap.org/data/2.5/onecall", {
            // ONE CALL GETS DATA FOR A 7 DAY FORECAST
            APPID: WEATHER_MAP_TOKEN,
            lat:    29.423017,
            lon:   -98.48527,
            units: "imperial"
        })
        .done(function(weather) {
            console.log(weather);
            // THIS LOOP RUNS THROUGH THE WEATHER DATA OBJECT TO GET SPECIFIC INFORMATION NEEDED
            for(var i = 0; i < 5; i++) {
                // NEEDED TO CONVERT UNIX DATE TO HUMAN READABLE DATE
                var unixMilli = ((weather.daily[i].dt)*1000);
                var dateObject = new Date(unixMilli);
                var date = dateObject.toLocaleDateString();
                // VARIABLE CREATED TO USE IN APPEND
                var tempMin = weather.daily[i].temp.min;
                var tempMax = weather.daily[i].temp.max;
                var description = weather.daily[i].weather[0].description;
                var humiidity = weather.daily[i].humidity;
                var wind = weather.daily[i].wind_speed;
                var pressure = weather.daily[i].pressure;
                // VARIABLES FOR GRABBING WEATHER ICON
                var iconCode = weather.daily[i].weather[0].icon;
                var iconUrl = "http://openweathermap.org/img/w/" + iconCode + ".png";
                // APPENDING WEATHER DATA TO HTML USING TEMPLATE LITERALS
                $(".container").append(
                    `<p>Date: ${date}</p>
                    <p>Temp min & max: ${tempMin}/${tempMax}</p>
                    <p>Description: ${description}</p>
                    <img id="weatherIcon" src="${iconUrl}" alt="Weather icon">
                    <p>Humidity: ${humiidity}</p>
                    <p>Wind: ${wind}</p>
                    <p>Pressure: ${pressure}</p>
                     <hr>`)
            }
        })

    </script>
    </body>
</html>